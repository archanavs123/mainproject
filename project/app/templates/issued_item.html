{% extends 'base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>issue</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'css/issue.css' %}">
</head>
<body>
{% block content %}
{% for message in messages %}
<div class="alert alert-{{message.tags}} rounded-0" role="alert">
    {{message}}
</div>
{% endfor %}
<br>
<div style="text-align: center;">
    <h1>AVAILABLE BOOKS</h1> <br>
    <div class="input-group container">
        <input
        id="search"
        type="search"
        class="form-control rounded"
        placeholder="Search Book"
        aria-label="Search"
        aria-describedby="search-addon"
      />
    </div>
</div>
<br>
<!-- <div class="tables"> -->
<div class="container" >
    <table class="table" style="background-color: white;">
      <thead class="thead-dark">
        <tr>
          <th class="" scope="col">Book Name</th>
          <th class="" scope="col">Author Name</th>
          <th class="" scope="col">Subject</th>
          <th class="" scope="col">Issue</th>
        </tr>
      </thead>
      <tbody id="table_data">
        {% for book in books %}
        <tr>
          <td>{{book.book_name}}</td>
          <td>{{book.author_name}}</td>
          <td>{{book.subject}}</td>
          <td>
            <div style="text-align: center;">
              <form action="issue" method="post">
                {% csrf_token %}
                <input type="hidden" name="book_id" value="{{book.id}}" />
                <button type="submit" class="btn btn-outline-success btn-sm">
                  <b>Issue</b>
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <script>
        $(document).ready(function () {
          $("#search").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#table_data tr").filter(function () {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
            });
          });
        });
      </script>
  </div>
  <!-- </div> -->
{% endblock %}

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</body>
</html>